!function(s){"use strict";s(document).on("submit",".exwoofood-woocommerce form",function(e){s("#food_modal .exwoofood-woocommerce > div .exfd-out-notice").remove();var o=s(this).find(".single_add_to_cart_button"),a=s(this),d="def";(a.closest(".exbt-inline").length||a.closest(".ex-hidden").length)&&(d="no");var t=a.find("input[name=add-to-cart]").val()||o.val(),n=s(".ex-fdlist > input[name=food_loc]").val();if(t&&!o.is(".disabled")){e.preventDefault();var i={action:"exwoofood_add_to_cart","add-to-cart":t,loc:n};a.serializeArray().forEach(function(e){i[e.name]=e.value}),s(document.body).trigger("adding_to_cart",[o,i]),s(this).find(".exrow-group.ex-checkbox").length&&s(this).find(".exrow-group.ex-checkbox").each(function(){var e=s(this).find(".ex-options").attr("name"),t=[];s(this).find('input[name="'+e+'"]:checked').each(function(){t.push(s(this).val())}),i[e]=t}),s(".wc-pao-addon-checkbox").length&&s(".wc-pao-addon-checkbox").each(function(){var e=s(this).attr("name"),t=[];s('input[name="'+e+'"]:checked').each(function(){t.push(s(this).val())}),i[e]=t}),s(".ppom-check-input").length&&s(".ppom-check-input").each(function(){var e,t;"checkbox"==s(this).attr("type")&&(e=s(this).attr("name"),t=[],s('input[name="'+e+'"]:checked').each(function(){t.push(s(this).val())}),i[e]=t)}),s(".wccf_product_field_checkbox").length&&s(".wccf_product_field_checkbox").each(function(){var e=s(this).attr("name"),t=[];s('input[name="'+e+'"]:checked').each(function(){t.push(s(this).val())}),i[e]=t});var c=s(".exfd-cart-mini").html();return s.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:i,beforeSend:function(e){o.removeClass("added").addClass("ex-loading")},complete:function(e){o.removeClass("ex-loading");var t=s(".exfd-cart-mini");c!=t&&(e.error||o.addClass("added"))},error:function(e,t,o){console.log(e.responseText)},success:function(e){var t;e.error?s("#food_modal .exwoofood-woocommerce > div").append(e.message):(s(".ex-fdlist.exwf-disable-atctg").length||s(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,o]),s(".woocommerce-notices-wrapper").empty().append(e.notices),s(".ex-fdlist.ex-food-plug .exfd-choice.ex-loading").length?s(".ex-fdlist.ex-food-plug .exfd-choice.ex-loading").removeClass("ex-loading"):s(".ex-fdlist .exstyle-3 .exstyle-3-image .exbt-inline span.ex-loading").length&&s(".ex-fdlist .exstyle-3 .exstyle-3-image .exbt-inline span.ex-loading").removeClass("ex-loading"),t=s(".exfd-cart-mini").html(),c==t&&(o.removeClass("added"),s("#food_modal .modal-content").data("close-popup")),e=o.closest(".ex-fdlist ").attr("id"),t=s("#"+e).hasClass("table-layout")?"table":"",0==(e=1==(e=o.closest(".exp-arrow").find("a img").eq(0)).length?e:o.closest("#food_modal").find("img").eq(0)).length&&("table"!=t?0==(e=o.closest(".item-grid").find("img").eq(0)).length&&0==(e=o.closest(".item-grid").find(".ex-fly-cart").eq(0)).length&&(e=o.closest(".item-grid")):0==(e=o.closest("tr").find("img").eq(0)).length&&(e=o.closest("tr").find(".item-grid"))),0==e.length&&jQuery(".ex_modal.exfd-modal-active").length&&(e=jQuery(".ex_modal.exfd-modal-active .exmd-no-img")),jQuery(".ex_modal.exfd-modal-active .exfd-img-mod").length&&(e=jQuery(".ex_modal.exfd-modal-active .exfd-img-mod")),t=e,0!=(e=jQuery(".exfd-shopping-cart")).length&&t.length&&t.clone().offset({top:t.offset().top,left:t.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"1001"}).appendTo(jQuery("body")).animate({top:e.offset().top+10,left:e.offset().left,width:40,height:40},800).animate({width:0,height:0},function(){jQuery(this).detach()}),s(".exfd-cart-mini").css("opacity",".6"),s.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:{action:"exwoofood_refresh_cart"},success:function(e){s("div.exfd-cart-mini").remove(),s(e.fragments["div.exfd-cart-mini"]).insertAfter(".exfd-cart-content .exfd-close-cart"),s(".exfd-shopping-cart span.exfd-cart-num").replaceWith(e.fragments["span.exfd-cart-num"]),s(".exwf-mbnav-icon span.exfd-cart-num").replaceWith(e.fragments["span.exfd-cart-num"])}}),s("#food_modal .exmd-upsells").length?s("#food_modal .exmd-upsells .exwf-md-up-sells").length||(s(".ex_modal").addClass("ex-loading"),t=a.closest(".modal-content").find("input[name=exwf_upsells_ids]").val(),e=t,t=s("#food_modal .exwf-md-modern").length,t={action:"exwf_ajax_upsells",ids:e,mdst:t},s.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,dataType:"json",data:t,success:function(e){"0"!=e&&s("#food_modal .exmd-upsells").append(e.html_content).fadeIn()}})):"yes"==s("#food_modal .modal-content").data("close-popup")&&"no"!=d&&s("#food_modal .ex_close").trigger("click"),o.hasClass("ex-loading")&&o.removeClass("ex-loading"),s(document).trigger("exwfqv_added_tocart"))}}),!1}})}(jQuery);